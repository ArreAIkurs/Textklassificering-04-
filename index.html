<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>MODEL DEBUG</title>
</head>
<body>

<h1>TFJS MODEL DEBUG</h1>

<pre id="log" style="font-size:16px; white-space:pre-wrap;"></pre>

<!-- R√ÑTT TF.JS -->
https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.17.0/dist/tf.min.js</script>

<script>
const logElem = document.getElementById("log");
function log(...msg) {
    console.log(...msg);
    logElem.textContent += msg.join(" ") + "\n";
}

async function testURL(url) {
    try {
        const res = await fetch(url, { cache: "no-store" });
        log("GET", url, "‚Üí", res.status, res.statusText);
        if (!res.ok) throw new Error("HTTP status " + res.status);
        return await res.text();
    } catch (e) {
        log("ERROR loading", url, ":", e);
        throw e;
    }
}

async function main() {
    log("‚û°Ô∏è STARTAR DEBUG‚Ä¶\n");

    // 1. Kolla model.json
    log("üîç L√§ser model.json ‚Ä¶");
    let modelJson = await testURL("model.json");
    let parsed;

    try {
        parsed = JSON.parse(modelJson);
        log("‚úî model.json √§r giltig JSON");
    } catch (e) {
        log("‚ùå model.json √§r INTE giltig JSON!", e);
        return;
    }

    // 2. Kolla shard-fil
    const shard = parsed.weightsManifest?.[0]?.paths?.[0];
    if (!shard) {
        log("‚ùå Hittar ingen shard-path i model.json!");
        return;
    }

    log("\nüîç L√§ser shard:", shard);
    await testURL(shard);

    // 3. Kolla metadata.json
    log("\nüîç L√§ser metadata.json ‚Ä¶");
    let metadata = await testURL("metadata.json");
    try {
        JSON.parse(metadata);
        log("‚úî metadata.json √§r giltig JSON");
    } catch (e) {
        log("‚ùå metadata.json √§r INTE giltig JSON!", e);
        return;
    }

    log("\nüéâ ALLA FILER G√ÖR ATT L√ÑSA UTAN FEL!");
}

main();
</script>

</body>
</html>
